<mvc:View
    controllerName="bitacora.controller.MainView"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:form="sap.ui.layout.form"
    xmlns:core="sap.ui.core"
    xmlns:layout="sap.ui.layout" 
    height="100%">
    <f:DynamicPage id="dynamicPageId" showFooter="true">
        <f:title>
            <f:DynamicPageTitle>
                <f:heading>
                    <Title text="Registro de Actividad en Bitácora"/>
                </f:heading>
                <f:expandedContent>
                    <Label text="Complete todos los campos para registrar una nueva actividad."/>
                </f:expandedContent>
            </f:DynamicPageTitle>
        </f:title>

        <f:header>
           <f:DynamicPageHeader pinnable="true">
                <layout:HorizontalLayout allowWrapping="true">
                    <layout:VerticalLayout class="sapUiMediumMarginEnd">
                        <ObjectAttribute title="Usuario" text="{userModel>/name}"/>
                        <ObjectAttribute title="Rol" text="{userModel>/role}"/>
                    </layout:VerticalLayout>
                    <layout:VerticalLayout>
                        <ObjectAttribute title="Fecha Actual" text="{userModel>/currentDate}"/>
                        <ObjectStatus text="Online" state="Success" />
                    </layout:VerticalLayout>
                </layout:HorizontalLayout>
            </f:DynamicPageHeader>
        </f:header>

        <f:content>
            <layout:VerticalLayout width="100%">

                <form:SimpleForm
                    editable="true"
                    layout="ResponsiveGridLayout"
                    labelSpanXL="3"
                    labelSpanL="3"
                    labelSpanM="3"
                    labelSpanS="12"
                    adjustLabelSpan="false"
                    emptySpanXL="4"
                    emptySpanL="4"
                    emptySpanM="4"
                    emptySpanS="0"
                    columnsXL="1"
                    columnsL="1"
                    columnsM="1"
                    singleContainerFullSize="false"
                    class="sapUiResponsiveMargin">
                    <form:content>
                        <core:Title text="Detalles de la Actividad" />
                        <Label text="Fecha" required="true" />
                        <DatePicker
                            id="dpFecha"
                            placeholder="Seleccione una fecha..."
                            valueFormat="yyyy-MM-dd"
                            displayFormat="long"
                            class="sapUiSmallMarginBottom" />

                        <Label text="Cliente" required="true" />
                        <Input
                            id="clienteInput"
                            placeholder="Escriba el cliente..."
                            class="sapUiSmallMarginBottom">
                        </Input>

                        <Label text="Proyecto" required="false" />
                        <Input
                            id="proyectoInput"
                            placeholder="Escriba el proyecto..."
                            class="sapUiSmallMarginBottom">
                        </Input>

                        <Label text="Actividad" required="true" />
                        <TextArea
                            id="txtActividad"
                            placeholder="Describa la actividad realizada..."
                            rows="4"
                            width="100%"
                            class="sapUiSmallMarginBottom" />

                        <Label text="Comentario" required="false" />
                        <TextArea
                            id="txtComentario"
                            placeholder="Escriba algún Comentario..."
                            rows="3"
                            width="100%"
                            class="sapUiSmallMarginBottom" />

                        <Label text="Horas Invertidas" required="true" />
                        <StepInput
                            id="siHoras"
                            value="0.25"
                            min="0.25"
                            max="24"
                            step="0.25"
                            width="150px"
                            displayValuePrecision = "2"
                            class="sapUiSmallMarginBottom" />
                    </form:content>
                </form:SimpleForm>

                <Table
                    id="logTable"
                    class="sapUiResponsiveMargin"
                    width="auto"
                    items="{localModel>/items}"
                    growing="true"
                    growingThreshold="20"
                    growingScrollToLoad="true"
                    noDataText="No tienes registros para esta semana.">
                    <headerToolbar>
                        <Toolbar>
                            <Title text="Mis Registros de la Semana" level="H2"/>
                        </Toolbar>
                    </headerToolbar>
                    <columns>
                        <Column  minScreenWidth="Tablet" demandPopin="true" width="10rem"><Text text="Fecha" /></Column>
                        <Column minScreenWidth="Tablet" demandPopin="true"><Text text="Cliente" /></Column>
                        <Column minScreenWidth="Tablet" demandPopin="true"><Text text="Proyecto" /></Column>
                        <Column minScreenWidth="Tablet" demandPopin="true"><Text text="Actividad" /></Column>
                        <Column minScreenWidth="Tablet" demandPopin="true"><Text text="Comentario" /></Column>
                        <Column minScreenWidth="Tablet" demandPopin="true" hAlign="End" width="6rem"><Text text="Horas" /></Column>
                    </columns>
                    <items>
                        <ColumnListItem>
                            <cells>
                                <Text text="{localModel>Fecha}" />
                                <Text text="{localModel>ClienteId}" />
                                <Text text="{localModel>ProyectoId}" />
                                <Text text="{localModel>Actividad}" />
                                <Text text="{localModel>Comentario}"/>
                                <ObjectNumber number="{localModel>Horas}"/>
                            </cells>
                        </ColumnListItem>
                    </items>
                </Table>

            </layout:VerticalLayout>
            </f:content>

        <f:footer>
            <OverflowToolbar>
                <ToolbarSpacer/>
                <Button id="btnSave" type="Emphasized" text="Guardar Registro" press=".onSave"/>
                <Button id="btnCancel" type="Default" text="Cancelar" press=".onCancel"/>
            </OverflowToolbar>
        </f:footer>
    </f:DynamicPage>
</mvc:View>